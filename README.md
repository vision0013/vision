# Chrome Extension - Page Crawler with Voice Control

ì›¹í˜ì´ì§€ ìë™ ë¶„ì„ ë° ìŒì„± ì œì–´ ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ” Chrome í™•ì¥ í”„ë¡œê·¸ë¨ì…ë‹ˆë‹¤.

## ğŸš€ ì£¼ìš” ê¸°ëŠ¥

- **ìë™ í˜ì´ì§€ ë¶„ì„**: ì›¹í˜ì´ì§€ì˜ ìƒí˜¸ì‘ìš© ê°€ëŠ¥í•œ ìš”ì†Œë“¤ì„ ìë™ìœ¼ë¡œ íƒì§€
- **ìŒì„± ì œì–´**: ìŒì„± ëª…ë ¹ìœ¼ë¡œ í˜ì´ì§€ ìš”ì†Œë¥¼ ì°¾ê³  í´ë¦­
- **ì‚¬ì´ë“œ íŒ¨ë„ UI**: Chrome ì‚¬ì´ë“œ íŒ¨ë„ì—ì„œ ë¶„ì„ ê²°ê³¼ í™•ì¸
- **ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸**: DOM ë³€ê²½ ì‹œ ìë™ìœ¼ë¡œ ì¬ë¶„ì„

## ğŸ¯ ìŒì„± ëª…ë ¹ì–´

### ì§€ì›í•˜ëŠ” ëª…ë ¹ì–´
- **"[í…ìŠ¤íŠ¸] í´ë¦­"**: í•´ë‹¹ í…ìŠ¤íŠ¸ê°€ í¬í•¨ëœ ìš”ì†Œë¥¼ í´ë¦­
- **"[í…ìŠ¤íŠ¸] ë²„íŠ¼"**: í•´ë‹¹ í…ìŠ¤íŠ¸ ë²„íŠ¼ì„ í´ë¦­  
- **"[í…ìŠ¤íŠ¸] ëˆŒëŸ¬"**: í•´ë‹¹ í…ìŠ¤íŠ¸ ìš”ì†Œë¥¼ í´ë¦­
- **"[í…ìŠ¤íŠ¸] ì°¾ì•„ì¤˜"**: í•´ë‹¹ í…ìŠ¤íŠ¸ ìš”ì†Œë¥¼ í•˜ì´ë¼ì´íŠ¸ (í´ë¦­í•˜ì§€ ì•ŠìŒ)

### ì‚¬ìš© ì˜ˆì‹œ
```
"ë¡œê·¸ì¸ í´ë¦­"        â†’ ë¡œê·¸ì¸ ë²„íŠ¼ í´ë¦­
"ë©”ë‰´ ë²„íŠ¼"          â†’ ë©”ë‰´ ë²„íŠ¼ í´ë¦­
"ê²€ìƒ‰ ì°¾ì•„ì¤˜"        â†’ ê²€ìƒ‰ ìš”ì†Œ í•˜ì´ë¼ì´íŠ¸
"ë‹¤ìŒ í˜ì´ì§€ ëˆŒëŸ¬"   â†’ ë‹¤ìŒ í˜ì´ì§€ ë²„íŠ¼ í´ë¦­
```

### ğŸ§  ìŠ¤ë§ˆíŠ¸ ë§¤ì¹­ ì‹œìŠ¤í…œ
ìŒì„± ëª…ë ¹ì€ **ìš°ì„ ìˆœìœ„ ê¸°ë°˜ ë§¤ì¹­**ìœ¼ë¡œ ê°€ì¥ ì ì ˆí•œ ìš”ì†Œë¥¼ ì„ íƒí•©ë‹ˆë‹¤:

#### ìš°ì„ ìˆœìœ„ ê³„ì‚°
1. **Viewport ë³´ë„ˆìŠ¤**: í™”ë©´ì— ë³´ì´ëŠ” ìš”ì†Œ +100ì 
2. **íƒ€ì… ìš°ì„ ìˆœìœ„**: button(100) > link(80) > text(60) > image(40)
3. **ì—­í•  ìš°ì„ ìˆœìœ„**: main(100) > nav(90) > header(70) > footer(20)
4. **í‚¤ì›Œë“œ ê°€ì¤‘ì¹˜**: íŠ¹ì • í‚¤ì›Œë“œë³„ ë§ì¶¤ ì ìˆ˜
5. **ìœ„ì¹˜ ë³´ë„ˆìŠ¤**: í™”ë©´ ìƒë‹¨/ì¤‘ì•™ ì˜ì—­ ì¶”ê°€ ì ìˆ˜

#### ì˜ˆì‹œ: "ë¡œê·¸ì¸ í´ë¦­"
```
í™”ë©´ì— ë³´ì´ëŠ” main ì˜ì—­ì˜ ë¡œê·¸ì¸ ë²„íŠ¼:
â†’ viewport(+100) + button(100) + main(100) + í‚¤ì›Œë“œ(200) = 500ì  âœ…

í™”ë©´ ë°– footerì˜ ë¡œê·¸ì¸ ë§í¬:
â†’ viewport(-100) + link(80) + footer(20) + í‚¤ì›Œë“œ(200) = 200ì  âŒ
```

## ğŸ—ï¸ ì•„í‚¤í…ì²˜

### ì „ì²´ êµ¬ì¡°
```
Chrome Extension
â”œâ”€â”€ Side Panel (UI)      â†’ ìŒì„± ì¸ì‹ + ê²°ê³¼ í‘œì‹œ
â”œâ”€â”€ Background Script    â†’ ë©”ì‹œì§€ ë¼ìš°íŒ…
â””â”€â”€ Content Script       â†’ DOM ë¶„ì„ + ìŒì„± ëª…ë ¹ ì‹¤í–‰
```

### ìŒì„± ì œì–´ í”Œë¡œìš°
```
1. Side Panel (ìŒì„± ì¸ì‹)
   â†“ chrome.runtime.sendMessage
2. Background Script (ë©”ì‹œì§€ ë¼ìš°íŒ…)  
   â†“ chrome.tabs.sendMessage
3. Content Script (ì‹¤ì œ DOM ì¡°ì‘)
```

### íŒŒì¼ êµ¬ì¡°
```
src/
â”œâ”€â”€ background/
â”‚   â””â”€â”€ background.ts                    # ë©”ì‹œì§€ ë¼ìš°íŒ…
â”œâ”€â”€ content/
â”‚   â””â”€â”€ content_script.tsx               # ë©”ì¸ ì½˜í…ì¸  ìŠ¤í¬ë¦½íŠ¸
â”œâ”€â”€ features/                            # ê¸°ëŠ¥ë³„ ëª¨ë“ˆ (v4.6+)
â”‚   â”œâ”€â”€ index.ts                         # Features ë°°ëŸ´ íŒŒì¼
â”‚   â”œâ”€â”€ page-analysis/                   # í˜ì´ì§€ ë¶„ì„ ê¸°ëŠ¥
â”‚   â”‚   â”œâ”€â”€ index.ts                     # ë°°ëŸ´ íŒŒì¼
â”‚   â”‚   â”œâ”€â”€ crawler.ts                   # í¬ë¡¤ë§ ë¡œì§
â”‚   â”‚   â””â”€â”€ dynamicObserver.ts           # ë™ì  ìš”ì†Œ ê°ì§€
â”‚   â”œâ”€â”€ voice-commands/                  # ìŒì„± ëª…ë ¹ ì²˜ë¦¬ (v4.7 ë¦¬íŒ©í† ë§)
â”‚   â”‚   â”œâ”€â”€ index.ts                     # ë°°ëŸ´ íŒŒì¼
â”‚   â”‚   â”œâ”€â”€ VoiceCommandProcessor.ts     # ìŒì„± ëª…ë ¹ í”„ë¡œì„¸ì„œ
â”‚   â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â”‚   â””â”€â”€ priorities.ts            # ìš°ì„ ìˆœìœ„ ì„¤ì •
â”‚   â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”‚   â”œâ”€â”€ elementMatcher.ts        # ìš”ì†Œ ë§¤ì¹­ ë¡œì§
â”‚   â”‚   â”‚   â””â”€â”€ priorityResolver.ts      # ìš°ì„ ìˆœìœ„ í•´ê²°
â”‚   â”‚   â””â”€â”€ actions/
â”‚   â”‚       â”œâ”€â”€ clickAction.ts           # í´ë¦­ ë™ì‘
â”‚   â”‚       â””â”€â”€ findAction.ts            # ì°¾ê¸° ë™ì‘
â”‚   â”œâ”€â”€ voice-recognition/               # ìŒì„± ì¸ì‹ ê¸°ëŠ¥
â”‚   â”‚   â”œâ”€â”€ index.ts                     # ë°°ëŸ´ íŒŒì¼
â”‚   â”‚   â”œâ”€â”€ hook/
â”‚   â”‚   â”‚   â””â”€â”€ useSpeechRecognition.ts  # ìŒì„± ì¸ì‹ í›…
â”‚   â”‚   â””â”€â”€ ui/
â”‚   â”‚       â””â”€â”€ TranscriptionDisplay.tsx # ìŒì„± ì¸ì‹ UI
â”‚   â”œâ”€â”€ filtering/                       # í•„í„°ë§ ê¸°ëŠ¥
â”‚   â”‚   â”œâ”€â”€ index.ts                     # ë°°ëŸ´ íŒŒì¼
â”‚   â”‚   â””â”€â”€ ui/
â”‚   â”‚       â””â”€â”€ FilterControls.tsx       # í•„í„° ì»¨íŠ¸ë¡¤
â”‚   â””â”€â”€ permissions/                     # ê¶Œí•œ ê´€ë¦¬
â”‚       â”œâ”€â”€ index.ts                     # ë°°ëŸ´ íŒŒì¼
â”‚       â””â”€â”€ ui/
â”‚           â””â”€â”€ PermissionsError.tsx     # ê¶Œí•œ ì˜¤ë¥˜ UI
â”œâ”€â”€ domains/side-panel/
â”‚   â”œâ”€â”€ controllers/
â”‚   â”‚   â””â”€â”€ useSidePanelController.ts    # ì‚¬ì´ë“œ íŒ¨ë„ ì œì–´
â”‚   â””â”€â”€ sections/
â”‚       â””â”€â”€ ui/
â”‚           â””â”€â”€ SidePanel.tsx            # ì‚¬ì´ë“œ íŒ¨ë„ ë©”ì¸ UI
â””â”€â”€ types/
    â””â”€â”€ index.ts                         # ê³µí†µ íƒ€ì… ì •ì˜
```

## ğŸ”„ ì£¼ìš” ë³€ê²½ì‚¬í•­ (v4)

### v4.3 - ë™ì  ìš”ì†Œ ê°ì§€ ë° ë¶€ë¶„ í¬ë¡¤ë§ ì‹œìŠ¤í…œ ğŸ¯
**ë¬¸ì œ**: ë“œë¡­ë‹¤ìš´, íŒì—… ë“± ë™ì ìœ¼ë¡œ ë‚˜íƒ€ë‚˜ëŠ” ìš”ì†Œë“¤ì´ ìŒì„± ëª…ë ¹ìœ¼ë¡œ ì¸ì‹ë˜ì§€ ì•ŠìŒ

#### í•´ê²° ê³¼ì •:
1. **ë¶€ë¶„ í¬ë¡¤ë§ ì‹œìŠ¤í…œ ë„ì…**
   - ì „ì²´ í˜ì´ì§€ ì¬ë¶„ì„ ëŒ€ì‹  ë³€ê²½ëœ ë¶€ë¶„ë§Œ íš¨ìœ¨ì ìœ¼ë¡œ í¬ë¡¤ë§
   - ê¸°ì¡´ ë°ì´í„°ì— ìƒˆ ìš”ì†Œë“¤ì„ ì¶”ê°€í•˜ëŠ” ë°©ì‹

2. **ì£¼ìš” ë¬¸ì œë“¤ê³¼ í•´ê²°ì±…**:
   - **ë¶€ëª¨ ì»¨í…Œì´ë„ˆ í¬ê¸° 0 ë¬¸ì œ**: `isVisibleRelaxed()` í•¨ìˆ˜ë¡œ ê´€ëŒ€í•œ visibility ì²´í¬
   - **DOM ì¤‘ì²© êµ¬ì¡° í•œê³„**: ì´ì¤‘ í¬ë¡¤ë§ìœ¼ë¡œ ë‚´ë¶€ ë§í¬/ë²„íŠ¼ ê°•ì œ íƒìƒ‰  
   - **ê¸€ììˆ˜ ì œí•œ**: ëª¨ë“  í¬ë¡¤ë§ì—ì„œ 3ê¸€ì â†’ 1ê¸€ìë¡œ í†µì¼í•˜ì—¬ "ë‰´ìŠ¤", "ì›¹" ë“± ì§§ì€ í…ìŠ¤íŠ¸ë„ ì¸ì‹
   - **ë¶€ë¶„ í¬ë¡¤ë§ ì¤‘ë³µ ê²€ì‚¬**: ìƒˆë¡œ ë‚˜íƒ€ë‚œ ìš”ì†ŒëŠ” ì¤‘ë³µ ê²€ì‚¬ ê±´ë„ˆë›°ê¸°ë¡œ í™•ì‹¤í•œ ë“±ë¡
   - **ì¤‘ë³µ í¬ë¡¤ë§**: ê°™ì€ ìš”ì†Œê°€ ì—¬ëŸ¬ ë²ˆ ë“±ë¡ë˜ëŠ” ë¶€ì‘ìš© ë°œìƒ

#### ë¬¸ì œ íŒŒì¼ë“¤:
- `src/content/crawler.ts` - ë¶€ë¶„ í¬ë¡¤ë§ ë¡œì§, visibility ì²´í¬
- `src/content/content_script.tsx` - MutationObserver, ë¶€ë¶„ í¬ë¡¤ë§ ì‹¤í–‰  
- `src/domains/side-panel/controllers/store/index.ts` - í¬ë¡¤ë§ ë°ì´í„° ì—…ë°ì´íŠ¸

#### í˜„ì¬ ë‚¨ì€ ì´ìŠˆ:
- **ì¢Œí‘œ ì •í™•ì„±**: ì¤‘ë³µ ìš”ì†Œë¡œ ì¸í•œ ì¢Œí‘œ/í¬ì»¤ìŠ¤ ë¬¸ì œ
- **ê³¼ë„í•œ í¬ë¡¤ë§**: ë™ì¼ ë§í¬ê°€ 2-3ê°œì”© ì¤‘ë³µ ë“±ë¡
- **ID í• ë‹¹ í˜¼ì„ **: `data-crawler-id`ê°€ ì¬í• ë‹¹ë˜ë©´ì„œ ìŒì„± ëª…ë ¹ íƒ€ê²Ÿ í˜¼ë™

#### ìµœì¢… êµ¬í˜„ëœ ê¸°ëŠ¥:
- âœ… **í†µí•© í…ìŠ¤íŠ¸ í•„í„°ë§**: ëª¨ë“  í¬ë¡¤ë§ì—ì„œ 1ê¸€ì ì´ìƒ í…ìŠ¤íŠ¸ ìˆ˜ì§‘
- âœ… **ë¶€ë¶„ í¬ë¡¤ë§ ì‹œìŠ¤í…œ**: ë™ì  ìš”ì†Œ ê°ì§€ ë° ê¸°ì¡´ ë°ì´í„°ì— ì¶”ê°€
- âœ… **ê´€ëŒ€í•œ visibility ì²´í¬**: ìƒˆë¡œ ë‚˜íƒ€ë‚œ ìš”ì†Œë“¤ì˜ ì•ˆì •ì  ê°ì§€
- âœ… **ì´ì¤‘ í¬ë¡¤ë§ ì „ëµ**: ê¹Šì€ ì¤‘ì²© êµ¬ì¡°ì—ì„œë„ ë§í¬/ë²„íŠ¼ ë°œê²¬

## ğŸ”„ ì£¼ìš” ë³€ê²½ì‚¬í•­ (v4)

## ğŸ”„ ì£¼ìš” ë³€ê²½ì‚¬í•­ (v4)

```markdown
### v4.5 - ë©€í‹°íƒ­ ë…ë¦½ ë°ì´í„° ê´€ë¦¬ ë° ì‹¤ì‹œê°„ DOM ë³€í™” ê°ì§€ ğŸ¯

**ë¬¸ì œ**: 
- íƒ­ ì „í™˜ ì‹œ ë°ì´í„°ê°€ ì„ì´ê±°ë‚˜ ì´ˆê¸°í™”ë˜ëŠ” ë¬¸ì œ
- ë¬´í•œ ìŠ¤í¬ë¡¤, AJAX ë¡œë”© ë“± ë™ì  ì½˜í…ì¸  ì‹¤ì‹œê°„ ê°ì§€ í•œê³„
- ê° íƒ­ë³„ í•„í„°/ê²€ìƒ‰ ìƒíƒœê°€ ìœ ì§€ë˜ì§€ ì•ŠìŒ

**í•´ê²°ì±…**:

#### 1. ë©€í‹°íƒ­ ë…ë¦½ ë°ì´í„° ê´€ë¦¬ ì‹œìŠ¤í…œ
```typescript
// ê° íƒ­ë³„ ë…ë¦½ì ì¸ ë°ì´í„° ì €ì¥
interface TabData {
  analysisResult: AnalysisResult | null;
  filter: string;
  searchTerm: string;
}

// íƒ­ë³„ ë°ì´í„° ë§µìœ¼ë¡œ ê´€ë¦¬
tabDataMap: { [tabId: number]: TabData };
```

#### 2. ì‹¤ì‹œê°„ íƒ­ ë³€í™” ê°ì§€
```typescript
// í¬ë¡¬ íƒ­ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
chrome.tabs.onActivated.addListener(handleTabActivated);
chrome.tabs.onUpdated.addListener(handleTabUpdated);
```

#### 3. ê³ ì„±ëŠ¥ DOM ë³€í™” ê°ì§€ ì‹œìŠ¤í…œ
```typescript
// MutationObserver + ë””ë°”ìš´ì‹± + ì„±ëŠ¥ ì¸¡ì •
export class DynamicElementObserver {
  private lastMutationTime: number = 0;
  
  private handleMutations() {
    const mutationStartTime = this.lastMutationTime;
    // 300ms ë””ë°”ìš´ì‹± í›„ ì²˜ë¦¬
    setTimeout(() => {
      const analysisTime = performance.now() - mutationStartTime;
      console.log(`â±ï¸ Timing: Total ${analysisTime.toFixed(1)}ms`);
    }, 300);
  }
}
```

**êµ¬í˜„ëœ ê¸°ëŠ¥ë“¤**:

- âœ… **íƒ­ë³„ ë…ë¦½ ìƒíƒœ**: íƒ­ A(ìƒí’ˆ ëª©ë¡) + íƒ­ B(ë‰´ìŠ¤) ë°ì´í„° ì™„ì „ ë¶„ë¦¬
- âœ… **í•„í„°/ê²€ìƒ‰ ìƒíƒœ ìœ ì§€**: íƒ­ë³„ë¡œ ë…ë¦½ì ì¸ í•„í„°ë§ ë° ê²€ìƒ‰ì–´ ë³´ì¡´
- âœ… **ì‹¤ì‹œê°„ DOM ê°ì§€**: ë¬´í•œ ìŠ¤í¬ë¡¤, ë“œë¡­ë‹¤ìš´, íŒì—… ë“± ì¦‰ì‹œ ì¸ì‹
- âœ… **ì„±ëŠ¥ ìµœì í™”**: ë””ë°”ìš´ì‹±(300ms) + ì¬ì‹œë„ ë¡œì§ìœ¼ë¡œ CPU íš¨ìœ¨ì„± í™•ë³´
- âœ… **ìƒì„¸ ì„±ëŠ¥ ì¸¡ì •**: DOM ë³€í™”ë¶€í„° ë¶„ì„ ì™„ë£Œê¹Œì§€ ì •í™•í•œ ì‹œê°„ ì¶”ì 
- âœ… **ë©”ëª¨ë¦¬ ê´€ë¦¬**: íƒ­ ë‹«í˜ ê°ì§€ë¡œ ìë™ ë°ì´í„° ì •ë¦¬

**ë™ì‘ ì‹œë‚˜ë¦¬ì˜¤**:
1. íƒ­ 1 (ì‡¼í•‘ëª°): ìƒí’ˆ 20ê°œ ë¶„ì„ + "button" í•„í„° ì ìš©
2. íƒ­ 2 (ë‰´ìŠ¤): ê¸°ì‚¬ 30ê°œ ë¶„ì„ + "link" í•„í„° ì ìš©  
3. íƒ­ 1ë¡œ ë³µê·€ â†’ ìƒí’ˆ 20ê°œ + "button" í•„í„° ìƒíƒœ ê·¸ëŒ€ë¡œ ìœ ì§€
4. ë¬´í•œ ìŠ¤í¬ë¡¤ â†’ ì¶”ê°€ ìƒí’ˆ 10ê°œ ìë™ ê°ì§€í•˜ì—¬ ì´ 30ê°œë¡œ ì—…ë°ì´íŠ¸


**ì„±ëŠ¥ ê°œì„ **:
- **ê°ì§€ ì†ë„**: DOM ë³€í™” í›„ í‰ê·  300-500ms ë‚´ ê°ì§€ ì™„ë£Œ
- **ë©”ëª¨ë¦¬ íš¨ìœ¨ì„±**: íƒ­ ë‹«í˜ ì‹œ ìë™ ì •ë¦¬ë¡œ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ë°©ì§€
- **CPU ìµœì í™”**: ë””ë°”ìš´ì‹±ìœ¼ë¡œ ì—°ì† ë³€í™”ë¥¼ ë°°ì¹˜ ì²˜ë¦¬



### v4.7 - ëª¨ë“ˆ êµ¬ì¡° ë¦¬íŒ©í† ë§ ë° ë°°ëŸ´ íŒŒì¼ ì‹œìŠ¤í…œ ë„ì… ğŸ—ï¸

**ë¬¸ì œ**: 
- `voice-commands/index.ts`ê°€ ë°°ëŸ´ íŒŒì¼ê³¼ í”„ë¡œì„¸ì„œ í´ë˜ìŠ¤ë¥¼ ë™ì‹œì— ë‹´ë‹¹í•˜ì—¬ ëª¨ë“ˆ ì¶©ëŒ ë°œìƒ
- TypeScriptì—ì„œ `'./voice-commands'` ëª¨ë“ˆì„ ì°¾ì„ ìˆ˜ ì—†ë‹¤ëŠ” ì˜¤ë¥˜ ë°œìƒ
- ì½”ë“œ êµ¬ì¡°ì˜ ëª…í™•ì„± ë¶€ì¡±ìœ¼ë¡œ ìœ ì§€ë³´ìˆ˜ì„± ì €í•˜

**í•´ê²°ì±…**:

#### 1. íŒŒì¼ ì—­í•  ë¶„ë¦¬
```typescript
// ê¸°ì¡´: voice-commands/index.ts (í˜¼ì¬)
export class VoiceCommandProcessor { ... }  // í”„ë¡œì„¸ì„œ + ë°°ëŸ´ ì—­í• 

// ë³€ê²½: ì—­í• ë³„ íŒŒì¼ ë¶„ë¦¬
voice-commands/VoiceCommandProcessor.ts     // í”„ë¡œì„¸ì„œ ì „ìš©
voice-commands/index.ts                     // ë°°ëŸ´ íŒŒì¼ ì „ìš©
```

#### 2. ë°°ëŸ´ íŒŒì¼ ì‹œìŠ¤í…œ ë„ì…
```typescript
// voice-commands/index.ts - ìƒˆë¡œìš´ ë°°ëŸ´ íŒŒì¼
export { VoiceCommandProcessor, type VoiceCommandResult } from './VoiceCommandProcessor';
export { clickAction } from './actions/clickAction';
export { findAction } from './actions/findAction';
export { ElementMatcher } from './utils/elementMatcher';
export { PriorityResolver } from './utils/priorityResolver';
```

#### 3. features ëª¨ë“ˆ í†µí•©
```typescript
// src/features/index.ts
export * from './page-analysis';
export * from './voice-commands';      // ì´ì œ ì •ìƒ ì‘ë™
export * from './voice-recognition';
export * from './filtering';
export * from './permissions';
```

**êµ¬í˜„ëœ ê¸°ëŠ¥ë“¤**:

- âœ… **ëª¨ë“ˆ êµ¬ì¡° ëª…í™•í™”**: ê° íŒŒì¼ì˜ ì—­í• ê³¼ ì±…ì„ ë¶„ë¦¬
- âœ… **ë°°ëŸ´ íŒŒì¼ ì‹œìŠ¤í…œ**: ëª¨ë“  í•˜ìœ„ ëª¨ë“ˆì„ ê¹”ë”í•˜ê²Œ export
- âœ… **TypeScript ì˜¤ë¥˜ í•´ê²°**: ëª¨ë“ˆ í•´ì„ ë¬¸ì œ ì™„ì „ í•´ê²°
- âœ… **ìœ ì§€ë³´ìˆ˜ì„± í–¥ìƒ**: ì½”ë“œ êµ¬ì¡°ê°€ ë” ì§ê´€ì ì´ê³  ê´€ë¦¬í•˜ê¸° ì‰¬ì›Œì§
- âœ… **í™•ì¥ì„± ê°œì„ **: ìƒˆë¡œìš´ ì•¡ì…˜ì´ë‚˜ ìœ í‹¸ë¦¬í‹° ì¶”ê°€ê°€ ìš©ì´í•´ì§

**íŒŒì¼ êµ¬ì¡° ë³€ê²½**:
```diff
src/features/voice-commands/
- â”œâ”€â”€ index.ts                    # VoiceCommandProcessor + ë°°ëŸ´ (í˜¼ì¬)
+ â”œâ”€â”€ VoiceCommandProcessor.ts    # í”„ë¡œì„¸ì„œ ì „ìš©
+ â”œâ”€â”€ index.ts                    # ë°°ëŸ´ íŒŒì¼ ì „ìš©
  â”œâ”€â”€ actions/
  â”œâ”€â”€ utils/
  â””â”€â”€ config/
```

**ì´ì **:
- **ê°œë°œ ê²½í—˜ í–¥ìƒ**: IDEì—ì„œ ëª¨ë“ˆ ìë™ì™„ì„±ì´ ì •í™•íˆ ì‘ë™
- **ì½”ë“œ ê°€ë…ì„±**: ê° íŒŒì¼ì˜ ëª©ì ì´ ëª…í™•í•˜ê²Œ êµ¬ë¶„ë¨
- **í™•ì¥ì„±**: ìƒˆë¡œìš´ ëª¨ë“ˆ ì¶”ê°€ ì‹œ ë°°ëŸ´ íŒŒì¼ë§Œ ìˆ˜ì •í•˜ë©´ ë¨
- **íƒ€ì… ì•ˆì „ì„±**: TypeScript ì»´íŒŒì¼ ì˜¤ë¥˜ ì—†ì´ ì•ˆì •ì ì¸ ë¹Œë“œ

### v4.6 - features ë””ë ‰í† ë¦¬ í†µí•© ì•„í‚¤í…ì²˜ ë„ì… ğŸ“

**ë¬¸ì œ**: 
- ê¸°ëŠ¥ë³„ ì½”ë“œê°€ ì—¬ëŸ¬ ë””ë ‰í† ë¦¬ì— ë¶„ì‚°ë˜ì–´ ê´€ë¦¬ ë³µì¡ì„± ì¦ê°€
- ìƒˆë¡œìš´ ê¸°ëŠ¥ ì¶”ê°€ ì‹œ íŒŒì¼ ìœ„ì¹˜ í˜¼ë™ ë° ì¤‘ë³µ ì½”ë“œ ë°œìƒ
- ëª¨ë“ˆ ê°„ ì˜ì¡´ì„± ê´€ë¦¬ì˜ ì–´ë ¤ì›€

**í•´ê²°ì±…**:

#### 1. features ì¤‘ì‹¬ ì•„í‚¤í…ì²˜ ë„ì…
```typescript
src/features/
â”œâ”€â”€ page-analysis/          # í˜ì´ì§€ ë¶„ì„ ê¸°ëŠ¥
â”œâ”€â”€ voice-commands/         # ìŒì„± ëª…ë ¹ ì²˜ë¦¬
â”œâ”€â”€ voice-recognition/      # ìŒì„± ì¸ì‹ ê¸°ëŠ¥  
â”œâ”€â”€ filtering/             # í•„í„°ë§ ê¸°ëŠ¥
â””â”€â”€ permissions/           # ê¶Œí•œ ê´€ë¦¬
```

#### 2. ê¸°ëŠ¥ë³„ ëª¨ë“ˆ ì™„ì „ ë…ë¦½í™”
```typescript
// ê° ê¸°ëŠ¥ì€ ë…ë¦½ì ì¸ index.tsë¥¼ ê°€ì§€ë©°
// ì™¸ë¶€ì—ì„œëŠ” features/index.tsë¥¼ í†µí•´ì„œë§Œ ì ‘ê·¼
export * from './page-analysis';
export * from './voice-commands';
// ...
```

#### 3. ê¸°ì¡´ content/voice-commandsë¥¼ featuresë¡œ ì´ì „
```typescript
// ê¸°ì¡´: src/content/voice-commands/
// ì´ì „: src/features/voice-commands/
```

**êµ¬í˜„ëœ ê¸°ëŠ¥ë“¤**:

- âœ… **ê¸°ëŠ¥ ì¤‘ì‹¬ êµ¬ì¡°**: ê´€ë ¨ ê¸°ëŠ¥ë“¤ì´ í•˜ë‚˜ì˜ ë””ë ‰í† ë¦¬ì— ì§‘ì¤‘
- âœ… **ëª¨ë“ˆ ë…ë¦½ì„±**: ê° ê¸°ëŠ¥ì´ ë…ë¦½ì ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ ë° ê°œë°œ ê°€ëŠ¥
- âœ… **í™•ì¥ì„±**: ìƒˆ ê¸°ëŠ¥ ì¶”ê°€ ì‹œ features ë””ë ‰í† ë¦¬ì—ë§Œ ì¶”ê°€
- âœ… **ì¤‘ì•™ì§‘ì¤‘ì‹ export**: features/index.tsë¥¼ í†µí•œ í†µí•© ê´€ë¦¬
- âœ… **ì½”ë“œ ì¬ì‚¬ìš©ì„±**: ê¸°ëŠ¥ ê°„ ê³µí†µ ìœ í‹¸ë¦¬í‹° ë¶„ë¦¬ ë° ê³µìœ 

### v4.4 - ì´ë²¤íŠ¸ ê¸°ë°˜ SPA ë‚´ë¹„ê²Œì´ì…˜ ê°ì§€ë¡œ ì „í™˜ ğŸ¯

* **ë¬¸ì œ**: v4.3ì˜ í´ë§ ë°©ì‹(500msë§ˆë‹¤ URL ì²´í¬)ì´ ë¹„íš¨ìœ¨ì ì´ê³  ì§€ì—° ë°œìƒ.
* **ì›ì¸**: URL ë³€ê²½ì„ "ê°ì§€"í•˜ì§€ ëª»í•˜ê³  "ì£¼ê¸°ì  í™•ì¸"ì—ë§Œ ì˜ì¡´.
* **í•´ê²°**: ì´ë²¤íŠ¸ ê¸°ë°˜ ê°ì§€ + Background ìƒíƒœ ê´€ë¦¬ í•˜ì´ë¸Œë¦¬ë“œ ë°©ì‹ ë„ì….
* **êµ¬í˜„**: 
  - History API ë©”ì„œë“œ(`pushState`, `replaceState`) ì˜¤ë²„ë¼ì´ë“œë¡œ SPA ë‚´ë¹„ê²Œì´ì…˜ ì¦‰ì‹œ ê°ì§€
  - `popstate` ì´ë²¤íŠ¸ë¡œ ë’¤ë¡œê°€ê¸°/ì•ìœ¼ë¡œê°€ê¸° ê°ì§€
  - Navigation API (Chrome 102+) ì§€ì› ì¶”ê°€
  - Background ìŠ¤í¬ë¦½íŠ¸ê°€ ì—¬ì „íˆ URL ì¤‘ë³µ ì²´í¬í•˜ì—¬ ë¶ˆí•„ìš”í•œ í¬ë¡¤ë§ ë°©ì§€
* **ë™ì‘**: URL ë³€ê²½ ì‹œ ì¦‰ì‹œ ê°ì§€ â†’ Backgroundì— í™•ì¸ ìš”ì²­ â†’ ìƒˆ URLì¼ ê²½ìš°ë§Œ í¬ë¡¤ë§ ì‹¤í–‰.
* **ê²°ê³¼**: 500ms ì§€ì—° ì œê±°, CPU ì‚¬ìš©ëŸ‰ ê°ì†Œ, ëª¨ë“  SPA í”„ë ˆì„ì›Œí¬ì—ì„œ ì•ˆì •ì  ì‘ë™.

### v4.3 - SPA 'ë’¤ë¡œê°€ê¸°' íƒìƒ‰ ë¬¸ì œ í•´ê²° ğŸ”„
* **ë¬¸ì œ**: SPA 'ë’¤ë¡œ ê°€ê¸°' ì‹œ `content_script`ê°€ ìƒˆë¡œê³ ì¹¨ë˜ë©° ì´ì „ URL ìƒíƒœë¥¼ ìƒì–´ë²„ë¦¬ëŠ” ë¬¸ì œ ë°œìƒ.
* **ì›ì¸**: `content_script`ì˜ ìƒíƒœ ë¹„ì˜ì†ì„±ìœ¼ë¡œ ì¸í•´ URL ë³€ê²½ ê°ì§€ ë¡œì§ì´ ë§¤ë²ˆ ì´ˆê¸°í™”ë¨.
* **í•´ê²°**: `background` ìŠ¤í¬ë¦½íŠ¸ì—ì„œ ê° íƒ­ì˜ URL ìƒíƒœë¥¼ ì¤‘ì•™ ê´€ë¦¬í•˜ë„ë¡ ì•„í‚¤í…ì²˜ ë³€ê²½.
* **ë™ì‘**: `content_script`ëŠ” ì£¼ê¸°ì ìœ¼ë¡œ URLì„ ë³´ê³ í•˜ê³ , `background`ê°€ ë³€ê²½ì„ ê°ì§€í•˜ì—¬ í¬ë¡¤ë§ì„ ëª…ë ¹.
* **ê²°ê³¼**: `content_script`ì˜ ìƒíƒœ ì˜ì¡´ì„±ì„ ì œê±°í•˜ì—¬ ëª¨ë“  íƒìƒ‰ì— ì•ˆì •ì ìœ¼ë¡œ ëŒ€ì‘.

### v4.2 - ì—°ì† ëª…ë ¹ ì‹¤í–‰ ë²„ê·¸ ìˆ˜ì • ğŸ”§
- **ì—°ì† ëª…ë ¹ ì§€ì›**: 1íšŒ ì´í›„ì—ë„ ìŒì„± ëª…ë ¹ì´ ì§€ì†ì ìœ¼ë¡œ ì‘ë™
- **SpeechRecognition ì•ˆì •í™”**: ê°ì²´ ì¬ìƒì„±ìœ¼ë¡œ ì¸í•œ ì—°ê²° ëŠê¹€ ë°©ì§€
- **ìƒíƒœ ê´€ë¦¬ ìµœì í™”**: useRef íŒ¨í„´ìœ¼ë¡œ ìµœì‹  ìƒíƒœ ì°¸ì¡°
- **ë””ë²„ê¹… ë¡œê·¸ ê°•í™”**: ìŒì„± ëª…ë ¹ ì²˜ë¦¬ ê³¼ì • ì¶”ì  ê°€ëŠ¥

### v4.1 - ìŠ¤ë§ˆíŠ¸ ìš°ì„ ìˆœìœ„ ì‹œìŠ¤í…œ ì¶”ê°€ âœ¨
- **ìš°ì„ ìˆœìœ„ ê¸°ë°˜ ë§¤ì¹­**: ê°€ì¥ ì ì ˆí•œ ìš”ì†Œë¥¼ ì§€ëŠ¥ì ìœ¼ë¡œ ì„ íƒ
- **Viewport ìš°ì„ ìˆœìœ„**: í™”ë©´ì— ë³´ì´ëŠ” ìš”ì†Œê°€ ìµœìš°ì„ 
- **íƒ€ì…/ì—­í• ë³„ ê°€ì¤‘ì¹˜**: button > link > text, main > nav > footer
- **í‚¤ì›Œë“œë³„ ë§ì¶¤ ì„¤ì •**: "ë¡œê·¸ì¸", "ê²€ìƒ‰" ë“± íŠ¹ë³„ ê°€ì¤‘ì¹˜
- **ìœ„ì¹˜ ê¸°ë°˜ ë³´ë„ˆìŠ¤**: í™”ë©´ ìƒë‹¨/ì¤‘ì•™ ì˜ì—­ ì¶”ê°€ ì ìˆ˜

### v4.0 - ì•„í‚¤í…ì²˜ ì¬ì„¤ê³„
#### ì´ì „ êµ¬ì¡°ì˜ ë¬¸ì œì 
- **Side Panelì—ì„œ ì§ì ‘ DOM ì¡°ì‘ ì‹œë„** â†’ ë³´ì•ˆìƒ ë¶ˆê°€ëŠ¥
- **ìŒì„± ëª…ë ¹ì´ ì‘ë™í•˜ì§€ ì•ŠìŒ** â†’ ì˜ëª»ëœ ì•„í‚¤í…ì²˜
- **ë‹¨ìˆœí•œ í…ìŠ¤íŠ¸ ë§¤ì¹­** â†’ ì˜ëª»ëœ ìš”ì†Œ ì„ íƒ ê°€ëŠ¥ì„±
- **1íšŒ ì´í›„ ëª…ë ¹ ë¨¹í†µ** â†’ SpeechRecognition ê°ì²´ ì¬ìƒì„± ë¬¸ì œ

#### í•´ê²° ë°©ë²•
1. **Side Panel**: ìŒì„± ì¸ì‹ë§Œ ë‹´ë‹¹, DOM ì¡°ì‘ ì œê±°
2. **Content Script**: ëª¨ë“  DOM ì¡°ì‘ ë¡œì§ ì´ê´€
3. **Background Script**: ë©”ì‹œì§€ ì¤‘ê³„ ì—­í•  ê°•í™”
4. **ìŠ¤ë§ˆíŠ¸ ë§¤ì¹­**: ìš°ì„ ìˆœìœ„ ê¸°ë°˜ ìš”ì†Œ ì„ íƒ
5. **ì—°ì† ëª…ë ¹**: useRef íŒ¨í„´ìœ¼ë¡œ ìƒíƒœ ê´€ë¦¬ ìµœì í™”

### ë³€ê²½ëœ ë©”ì‹œì§€ í”Œë¡œìš°
```javascript
// ì´ì „: Side Panelì—ì„œ ì§ì ‘ DOM ì¡°ì‘ (âŒ ë¶ˆê°€ëŠ¥)
voiceCommandController(command, analysisResult.items);

// í˜„ì¬: ë©”ì‹œì§€ í†µì‹  + ìŠ¤ë§ˆíŠ¸ ë§¤ì¹­ + ì—°ì† ëª…ë ¹ (âœ… ì •ìƒ ë™ì‘)
// 1. useRefë¡œ ìµœì‹  ìƒíƒœ ì°¸ì¡°
const currentTabId = activeTabIdRef.current;
const currentAnalysisResult = analysisResultRef.current;

// 2. ë©”ì‹œì§€ ì „ì†¡
chrome.runtime.sendMessage({
  action: 'executeVoiceCommand',
  command: command,
  tabId: currentTabId
});

// 3. Content Scriptì—ì„œ ìš°ì„ ìˆœìœ„ ê¸°ë°˜ ë§¤ì¹­
const matcher = new ElementMatcher();
const bestMatch = matcher.findBestMatch(targetText, items);
```

## ğŸ› ï¸ ê°œë°œ ê°€ì´ë“œ

### ì„¤ì¹˜ ë° ì‹¤í–‰
```bash
npm install
npm run build
```

### Chromeì— í™•ì¥ í”„ë¡œê·¸ë¨ ë¡œë“œ
1. Chrome í™•ì¥ í”„ë¡œê·¸ë¨ í˜ì´ì§€ (chrome://extensions/) ì ‘ì†
2. "ê°œë°œì ëª¨ë“œ" í™œì„±í™”
3. "ì••ì¶•í•´ì œëœ í™•ì¥ í”„ë¡œê·¸ë¨ì„ ë¡œë“œí•©ë‹ˆë‹¤" í´ë¦­
4. `dist` í´ë” ì„ íƒ

### ì‚¬ìš© ë°©ë²•
1. ì›¹í˜ì´ì§€ì—ì„œ í™•ì¥ í”„ë¡œê·¸ë¨ ì•„ì´ì½˜ í´ë¦­
2. ì‚¬ì´ë“œ íŒ¨ë„ì—ì„œ ë§ˆì´í¬ ë²„íŠ¼ í´ë¦­
3. ìŒì„± ëª…ë ¹ ë§í•˜ê¸°
4. ìë™ìœ¼ë¡œ í•´ë‹¹ ìš”ì†Œ ì°¾ê¸°/í´ë¦­

## ğŸ”§ ê¸°ìˆ  ìŠ¤íƒ

- **Frontend**: React + TypeScript + Vite
- **Extension**: Chrome Extension Manifest V3
- **Voice Recognition**: Web Speech API
- **Styling**: CSS Modules

## ğŸ“ ê°œë°œ ë…¸íŠ¸

### ìŒì„± ëª…ë ¹ ì¶”ê°€í•˜ê¸°
1. `src/features/voice-commands/VoiceCommandProcessor.ts`ì—ì„œ í‚¤ì›Œë“œ ì¶”ê°€
2. `src/features/voice-commands/actions/`ì— ìƒˆ ì•¡ì…˜ íŒŒì¼ ìƒì„±
3. `src/features/voice-commands/config/priorities.ts`ì—ì„œ ìš°ì„ ìˆœìœ„ ì„¤ì •
4. `src/features/voice-commands/index.ts`ì—ì„œ ìƒˆ ëª¨ë“ˆ export
5. íƒ€ì… ì •ì˜ ì—…ë°ì´íŠ¸

### ìš°ì„ ìˆœìœ„ ì„¤ì • ì»¤ìŠ¤í„°ë§ˆì´ì§•
`src/features/voice-commands/config/priorities.ts`ì—ì„œ ë‹¤ìŒì„ ì¡°ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:
- **íƒ€ì…ë³„ ìš°ì„ ìˆœìœ„**: button, link, text, image ì ìˆ˜
- **ì—­í• ë³„ ìš°ì„ ìˆœìœ„**: main, nav, header, footer ì ìˆ˜  
- **í‚¤ì›Œë“œë³„ ê°€ì¤‘ì¹˜**: íŠ¹ì • ë‹¨ì–´ì— ëŒ€í•œ ë§ì¶¤ ì„¤ì •
- **ìœ„ì¹˜ ë³´ë„ˆìŠ¤**: viewport ë‚´/ì™¸ ì ìˆ˜, ìƒë‹¨/ì¤‘ì•™ ë³´ë„ˆìŠ¤

### ë””ë²„ê¹…
- **Side Panel ë””ë²„ê·¸**: F12 â†’ Elements â†’ #chrome-extension-... â†’ ìš°í´ë¦­ â†’ Inspect
- **Content Script ë””ë²„ê·¸**: F12 Consoleì—ì„œ ë¡œê·¸ í™•ì¸
- **Background Script ë””ë²„ê·¸**: chrome://extensions/ â†’ í™•ì¥í”„ë¡œê·¸ë¨ â†’ "ë°±ê·¸ë¼ìš´ë“œ í˜ì´ì§€" í´ë¦­

### ìŒì„± ëª…ë ¹ ë””ë²„ê¹… ë¡œê·¸
ì½˜ì†”ì—ì„œ ë‹¤ìŒê³¼ ê°™ì€ ë¡œê·¸ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:
```
ğŸ¤ Voice command received: ë¡œê·¸ì¸ í´ë¦­
ğŸ¤ Current tab ID: 123456789
ğŸ¤ Analysis result available: true
ğŸ¤ Sending voice command: ë¡œê·¸ì¸ í´ë¦­ to tab: 123456789
ğŸ¯ Found 3 candidates for "ë¡œê·¸ì¸":
âœ… Best match for "ë¡œê·¸ì¸": button (main, score: 500)
```

### ë¬¸ì œ í•´ê²°
**Q: ìŒì„± ëª…ë ¹ì´ 1íšŒ ì´í›„ ì‘ë™í•˜ì§€ ì•ŠìŒ**
A: v4.2ì—ì„œ í•´ê²°ë¨. useRef íŒ¨í„´ìœ¼ë¡œ ìƒíƒœ ê´€ë¦¬ ìµœì í™”

**Q: ì˜ëª»ëœ ìš”ì†Œê°€ í´ë¦­ë¨**  
A: `src/content/voice-commands/config/priorities.ts`ì—ì„œ ìš°ì„ ìˆœìœ„ ì¡°ì •

**Q: ìŒì„± ì¸ì‹ì´ ì•ˆë¨**
A: ë¸Œë¼ìš°ì € ë§ˆì´í¬ ê¶Œí•œ í™•ì¸ ë° HTTPS ì‚¬ì´íŠ¸ì—ì„œ í…ŒìŠ¤íŠ¸