# Chrome Extension - Page Crawler with Voice Control

ì›¹í˜ì´ì§€ ìë™ ë¶„ì„ ë° ìŒì„± ì œì–´ ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ” Chrome í™•ì¥ í”„ë¡œê·¸ë¨ì…ë‹ˆë‹¤.

## ğŸš€ ì£¼ìš” ê¸°ëŠ¥

- **ìë™ í˜ì´ì§€ ë¶„ì„**: ì›¹í˜ì´ì§€ì˜ ìƒí˜¸ì‘ìš© ê°€ëŠ¥í•œ ìš”ì†Œë“¤ì„ ìë™ìœ¼ë¡œ íƒì§€
- **ìŒì„± ì œì–´**: ìŒì„± ëª…ë ¹ìœ¼ë¡œ í˜ì´ì§€ ìš”ì†Œë¥¼ ì°¾ê³  í´ë¦­
- **ì‚¬ì´ë“œ íŒ¨ë„ UI**: Chrome ì‚¬ì´ë“œ íŒ¨ë„ì—ì„œ ë¶„ì„ ê²°ê³¼ í™•ì¸
- **ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸**: DOM ë³€ê²½ ì‹œ ìë™ìœ¼ë¡œ ì¬ë¶„ì„

## ğŸ¯ ìŒì„± ëª…ë ¹ì–´

### ì§€ì›í•˜ëŠ” ëª…ë ¹ì–´
- **"[í…ìŠ¤íŠ¸] í´ë¦­"**: í•´ë‹¹ í…ìŠ¤íŠ¸ê°€ í¬í•¨ëœ ìš”ì†Œë¥¼ í´ë¦­
- **"[í…ìŠ¤íŠ¸] ë²„íŠ¼"**: í•´ë‹¹ í…ìŠ¤íŠ¸ ë²„íŠ¼ì„ í´ë¦­  
- **"[í…ìŠ¤íŠ¸] ëˆŒëŸ¬"**: í•´ë‹¹ í…ìŠ¤íŠ¸ ìš”ì†Œë¥¼ í´ë¦­
- **"[í…ìŠ¤íŠ¸] ì°¾ì•„ì¤˜"**: í•´ë‹¹ í…ìŠ¤íŠ¸ ìš”ì†Œë¥¼ í•˜ì´ë¼ì´íŠ¸ (í´ë¦­í•˜ì§€ ì•ŠìŒ)

### ì‚¬ìš© ì˜ˆì‹œ
```
"ë¡œê·¸ì¸ í´ë¦­"        â†’ ë¡œê·¸ì¸ ë²„íŠ¼ í´ë¦­
"ë©”ë‰´ ë²„íŠ¼"          â†’ ë©”ë‰´ ë²„íŠ¼ í´ë¦­
"ê²€ìƒ‰ ì°¾ì•„ì¤˜"        â†’ ê²€ìƒ‰ ìš”ì†Œ í•˜ì´ë¼ì´íŠ¸
"ë‹¤ìŒ í˜ì´ì§€ ëˆŒëŸ¬"   â†’ ë‹¤ìŒ í˜ì´ì§€ ë²„íŠ¼ í´ë¦­
```

### ğŸ§  ìŠ¤ë§ˆíŠ¸ ë§¤ì¹­ ì‹œìŠ¤í…œ
ìŒì„± ëª…ë ¹ì€ **ìš°ì„ ìˆœìœ„ ê¸°ë°˜ ë§¤ì¹­**ìœ¼ë¡œ ê°€ì¥ ì ì ˆí•œ ìš”ì†Œë¥¼ ì„ íƒí•©ë‹ˆë‹¤:

#### ìš°ì„ ìˆœìœ„ ê³„ì‚°
1. **Viewport ë³´ë„ˆìŠ¤**: í™”ë©´ì— ë³´ì´ëŠ” ìš”ì†Œ +100ì 
2. **íƒ€ì… ìš°ì„ ìˆœìœ„**: button(100) > link(80) > text(60) > image(40)
3. **ì—­í•  ìš°ì„ ìˆœìœ„**: main(100) > nav(90) > header(70) > footer(20)
4. **í‚¤ì›Œë“œ ê°€ì¤‘ì¹˜**: íŠ¹ì • í‚¤ì›Œë“œë³„ ë§ì¶¤ ì ìˆ˜
5. **ìœ„ì¹˜ ë³´ë„ˆìŠ¤**: í™”ë©´ ìƒë‹¨/ì¤‘ì•™ ì˜ì—­ ì¶”ê°€ ì ìˆ˜

#### ì˜ˆì‹œ: "ë¡œê·¸ì¸ í´ë¦­"
```
í™”ë©´ì— ë³´ì´ëŠ” main ì˜ì—­ì˜ ë¡œê·¸ì¸ ë²„íŠ¼:
â†’ viewport(+100) + button(100) + main(100) + í‚¤ì›Œë“œ(200) = 500ì  âœ…

í™”ë©´ ë°– footerì˜ ë¡œê·¸ì¸ ë§í¬:
â†’ viewport(-100) + link(80) + footer(20) + í‚¤ì›Œë“œ(200) = 200ì  âŒ
```

## ğŸ—ï¸ ì•„í‚¤í…ì²˜

### ì „ì²´ êµ¬ì¡°
```
Chrome Extension
â”œâ”€â”€ Side Panel (UI)      â†’ ìŒì„± ì¸ì‹ + ê²°ê³¼ í‘œì‹œ
â”œâ”€â”€ Background Script    â†’ ë©”ì‹œì§€ ë¼ìš°íŒ…
â””â”€â”€ Content Script       â†’ DOM ë¶„ì„ + ìŒì„± ëª…ë ¹ ì‹¤í–‰
```

### ìŒì„± ì œì–´ í”Œë¡œìš°
```
1. Side Panel (ìŒì„± ì¸ì‹)
   â†“ chrome.runtime.sendMessage
2. Background Script (ë©”ì‹œì§€ ë¼ìš°íŒ…)  
   â†“ chrome.tabs.sendMessage
3. Content Script (ì‹¤ì œ DOM ì¡°ì‘)
```

### íŒŒì¼ êµ¬ì¡°
```
src/
â”œâ”€â”€ background/
â”‚   â””â”€â”€ background.ts              # ë©”ì‹œì§€ ë¼ìš°íŒ…
â”œâ”€â”€ content/
â”‚   â”œâ”€â”€ content_script.tsx         # ë©”ì¸ ì½˜í…ì¸  ìŠ¤í¬ë¦½íŠ¸
â”‚   â”œâ”€â”€ crawler.ts                 # í˜ì´ì§€ ë¶„ì„ ë¡œì§
â”‚   â””â”€â”€ voice-commands/            # ìŒì„± ëª…ë ¹ ì²˜ë¦¬
â”‚       â”œâ”€â”€ index.ts               # VoiceCommandProcessor
â”‚       â”œâ”€â”€ config/
â”‚       â”‚   â””â”€â”€ priorities.ts      # ìš°ì„ ìˆœìœ„ ì„¤ì •
â”‚       â”œâ”€â”€ utils/
â”‚       â”‚   â”œâ”€â”€ elementMatcher.ts  # ìš”ì†Œ ë§¤ì¹­ ë¡œì§
â”‚       â”‚   â””â”€â”€ priorityResolver.ts # ìš°ì„ ìˆœìœ„ í•´ê²°
â”‚       â””â”€â”€ actions/
â”‚           â”œâ”€â”€ clickAction.ts     # í´ë¦­ ë™ì‘
â”‚           â””â”€â”€ findAction.ts      # ì°¾ê¸° ë™ì‘
â””â”€â”€ domains/side-panel/
    â”œâ”€â”€ controllers/
    â”‚   â””â”€â”€ useSidePanelController.ts  # ì‚¬ì´ë“œ íŒ¨ë„ ì œì–´
    â””â”€â”€ features/
        â””â”€â”€ voice-recognition/         # ìŒì„± ì¸ì‹ ê¸°ëŠ¥
```

## ğŸ”„ ì£¼ìš” ë³€ê²½ì‚¬í•­ (v4)

### v4.2 - ì—°ì† ëª…ë ¹ ì‹¤í–‰ ë²„ê·¸ ìˆ˜ì • ğŸ”§
- **ì—°ì† ëª…ë ¹ ì§€ì›**: 1íšŒ ì´í›„ì—ë„ ìŒì„± ëª…ë ¹ì´ ì§€ì†ì ìœ¼ë¡œ ì‘ë™
- **SpeechRecognition ì•ˆì •í™”**: ê°ì²´ ì¬ìƒì„±ìœ¼ë¡œ ì¸í•œ ì—°ê²° ëŠê¹€ ë°©ì§€
- **ìƒíƒœ ê´€ë¦¬ ìµœì í™”**: useRef íŒ¨í„´ìœ¼ë¡œ ìµœì‹  ìƒíƒœ ì°¸ì¡°
- **ë””ë²„ê¹… ë¡œê·¸ ê°•í™”**: ìŒì„± ëª…ë ¹ ì²˜ë¦¬ ê³¼ì • ì¶”ì  ê°€ëŠ¥

### v4.1 - ìŠ¤ë§ˆíŠ¸ ìš°ì„ ìˆœìœ„ ì‹œìŠ¤í…œ ì¶”ê°€ âœ¨
- **ìš°ì„ ìˆœìœ„ ê¸°ë°˜ ë§¤ì¹­**: ê°€ì¥ ì ì ˆí•œ ìš”ì†Œë¥¼ ì§€ëŠ¥ì ìœ¼ë¡œ ì„ íƒ
- **Viewport ìš°ì„ ìˆœìœ„**: í™”ë©´ì— ë³´ì´ëŠ” ìš”ì†Œê°€ ìµœìš°ì„ 
- **íƒ€ì…/ì—­í• ë³„ ê°€ì¤‘ì¹˜**: button > link > text, main > nav > footer
- **í‚¤ì›Œë“œë³„ ë§ì¶¤ ì„¤ì •**: "ë¡œê·¸ì¸", "ê²€ìƒ‰" ë“± íŠ¹ë³„ ê°€ì¤‘ì¹˜
- **ìœ„ì¹˜ ê¸°ë°˜ ë³´ë„ˆìŠ¤**: í™”ë©´ ìƒë‹¨/ì¤‘ì•™ ì˜ì—­ ì¶”ê°€ ì ìˆ˜

### v4.0 - ì•„í‚¤í…ì²˜ ì¬ì„¤ê³„
#### ì´ì „ êµ¬ì¡°ì˜ ë¬¸ì œì 
- **Side Panelì—ì„œ ì§ì ‘ DOM ì¡°ì‘ ì‹œë„** â†’ ë³´ì•ˆìƒ ë¶ˆê°€ëŠ¥
- **ìŒì„± ëª…ë ¹ì´ ì‘ë™í•˜ì§€ ì•ŠìŒ** â†’ ì˜ëª»ëœ ì•„í‚¤í…ì²˜
- **ë‹¨ìˆœí•œ í…ìŠ¤íŠ¸ ë§¤ì¹­** â†’ ì˜ëª»ëœ ìš”ì†Œ ì„ íƒ ê°€ëŠ¥ì„±
- **1íšŒ ì´í›„ ëª…ë ¹ ë¨¹í†µ** â†’ SpeechRecognition ê°ì²´ ì¬ìƒì„± ë¬¸ì œ

#### í•´ê²° ë°©ë²•
1. **Side Panel**: ìŒì„± ì¸ì‹ë§Œ ë‹´ë‹¹, DOM ì¡°ì‘ ì œê±°
2. **Content Script**: ëª¨ë“  DOM ì¡°ì‘ ë¡œì§ ì´ê´€
3. **Background Script**: ë©”ì‹œì§€ ì¤‘ê³„ ì—­í•  ê°•í™”
4. **ìŠ¤ë§ˆíŠ¸ ë§¤ì¹­**: ìš°ì„ ìˆœìœ„ ê¸°ë°˜ ìš”ì†Œ ì„ íƒ
5. **ì—°ì† ëª…ë ¹**: useRef íŒ¨í„´ìœ¼ë¡œ ìƒíƒœ ê´€ë¦¬ ìµœì í™”

### ë³€ê²½ëœ ë©”ì‹œì§€ í”Œë¡œìš°
```javascript
// ì´ì „: Side Panelì—ì„œ ì§ì ‘ DOM ì¡°ì‘ (âŒ ë¶ˆê°€ëŠ¥)
voiceCommandController(command, analysisResult.items);

// í˜„ì¬: ë©”ì‹œì§€ í†µì‹  + ìŠ¤ë§ˆíŠ¸ ë§¤ì¹­ + ì—°ì† ëª…ë ¹ (âœ… ì •ìƒ ë™ì‘)
// 1. useRefë¡œ ìµœì‹  ìƒíƒœ ì°¸ì¡°
const currentTabId = activeTabIdRef.current;
const currentAnalysisResult = analysisResultRef.current;

// 2. ë©”ì‹œì§€ ì „ì†¡
chrome.runtime.sendMessage({
  action: 'executeVoiceCommand',
  command: command,
  tabId: currentTabId
});

// 3. Content Scriptì—ì„œ ìš°ì„ ìˆœìœ„ ê¸°ë°˜ ë§¤ì¹­
const matcher = new ElementMatcher();
const bestMatch = matcher.findBestMatch(targetText, items);
```

## ğŸ› ï¸ ê°œë°œ ê°€ì´ë“œ

### ì„¤ì¹˜ ë° ì‹¤í–‰
```bash
npm install
npm run build
```

### Chromeì— í™•ì¥ í”„ë¡œê·¸ë¨ ë¡œë“œ
1. Chrome í™•ì¥ í”„ë¡œê·¸ë¨ í˜ì´ì§€ (chrome://extensions/) ì ‘ì†
2. "ê°œë°œì ëª¨ë“œ" í™œì„±í™”
3. "ì••ì¶•í•´ì œëœ í™•ì¥ í”„ë¡œê·¸ë¨ì„ ë¡œë“œí•©ë‹ˆë‹¤" í´ë¦­
4. `dist` í´ë” ì„ íƒ

### ì‚¬ìš© ë°©ë²•
1. ì›¹í˜ì´ì§€ì—ì„œ í™•ì¥ í”„ë¡œê·¸ë¨ ì•„ì´ì½˜ í´ë¦­
2. ì‚¬ì´ë“œ íŒ¨ë„ì—ì„œ ë§ˆì´í¬ ë²„íŠ¼ í´ë¦­
3. ìŒì„± ëª…ë ¹ ë§í•˜ê¸°
4. ìë™ìœ¼ë¡œ í•´ë‹¹ ìš”ì†Œ ì°¾ê¸°/í´ë¦­

## ğŸ”§ ê¸°ìˆ  ìŠ¤íƒ

- **Frontend**: React + TypeScript + Vite
- **Extension**: Chrome Extension Manifest V3
- **Voice Recognition**: Web Speech API
- **Styling**: CSS Modules

## ğŸ“ ê°œë°œ ë…¸íŠ¸

### ìŒì„± ëª…ë ¹ ì¶”ê°€í•˜ê¸°
1. `src/content/voice-commands/index.ts`ì—ì„œ í‚¤ì›Œë“œ ì¶”ê°€
2. `src/content/voice-commands/actions/`ì— ìƒˆ ì•¡ì…˜ íŒŒì¼ ìƒì„±
3. `src/content/voice-commands/config/priorities.ts`ì—ì„œ ìš°ì„ ìˆœìœ„ ì„¤ì •
4. íƒ€ì… ì •ì˜ ì—…ë°ì´íŠ¸

### ìš°ì„ ìˆœìœ„ ì„¤ì • ì»¤ìŠ¤í„°ë§ˆì´ì§•
`src/content/voice-commands/config/priorities.ts`ì—ì„œ ë‹¤ìŒì„ ì¡°ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:
- **íƒ€ì…ë³„ ìš°ì„ ìˆœìœ„**: button, link, text, image ì ìˆ˜
- **ì—­í• ë³„ ìš°ì„ ìˆœìœ„**: main, nav, header, footer ì ìˆ˜  
- **í‚¤ì›Œë“œë³„ ê°€ì¤‘ì¹˜**: íŠ¹ì • ë‹¨ì–´ì— ëŒ€í•œ ë§ì¶¤ ì„¤ì •
- **ìœ„ì¹˜ ë³´ë„ˆìŠ¤**: viewport ë‚´/ì™¸ ì ìˆ˜, ìƒë‹¨/ì¤‘ì•™ ë³´ë„ˆìŠ¤

### ë””ë²„ê¹…
- **Side Panel ë””ë²„ê·¸**: F12 â†’ Elements â†’ #chrome-extension-... â†’ ìš°í´ë¦­ â†’ Inspect
- **Content Script ë””ë²„ê·¸**: F12 Consoleì—ì„œ ë¡œê·¸ í™•ì¸
- **Background Script ë””ë²„ê·¸**: chrome://extensions/ â†’ í™•ì¥í”„ë¡œê·¸ë¨ â†’ "ë°±ê·¸ë¼ìš´ë“œ í˜ì´ì§€" í´ë¦­

### ìŒì„± ëª…ë ¹ ë””ë²„ê¹… ë¡œê·¸
ì½˜ì†”ì—ì„œ ë‹¤ìŒê³¼ ê°™ì€ ë¡œê·¸ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:
```
ğŸ¤ Voice command received: ë¡œê·¸ì¸ í´ë¦­
ğŸ¤ Current tab ID: 123456789
ğŸ¤ Analysis result available: true
ğŸ¤ Sending voice command: ë¡œê·¸ì¸ í´ë¦­ to tab: 123456789
ğŸ¯ Found 3 candidates for "ë¡œê·¸ì¸":
âœ… Best match for "ë¡œê·¸ì¸": button (main, score: 500)
```

### ë¬¸ì œ í•´ê²°
**Q: ìŒì„± ëª…ë ¹ì´ 1íšŒ ì´í›„ ì‘ë™í•˜ì§€ ì•ŠìŒ**
A: v4.2ì—ì„œ í•´ê²°ë¨. useRef íŒ¨í„´ìœ¼ë¡œ ìƒíƒœ ê´€ë¦¬ ìµœì í™”

**Q: ì˜ëª»ëœ ìš”ì†Œê°€ í´ë¦­ë¨**  
A: `src/content/voice-commands/config/priorities.ts`ì—ì„œ ìš°ì„ ìˆœìœ„ ì¡°ì •

**Q: ìŒì„± ì¸ì‹ì´ ì•ˆë¨**
A: ë¸Œë¼ìš°ì € ë§ˆì´í¬ ê¶Œí•œ í™•ì¸ ë° HTTPS ì‚¬ì´íŠ¸ì—ì„œ í…ŒìŠ¤íŠ¸